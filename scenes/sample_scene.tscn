[gd_scene load_steps=18 format=3 uid="uid://caa2tvliprdb0"]

[ext_resource type="PackedScene" uid="uid://bro60eusjxrgn" path="res://scenes/player/player.tscn" id="1_jcc8f"]
[ext_resource type="Script" uid="uid://c6n7fhsvfdgav" path="res://scripts/components/combat/hitbox and hurtbox/hitbox.gd" id="2_7kit5"]
[ext_resource type="Script" uid="uid://brg71t7h26ou0" path="res://scripts/resources/combat/attack_resource.gd" id="3_hvwi5"]
[ext_resource type="Script" uid="uid://e14frlxwqj6p" path="res://scripts/components/combat/hitbox and hurtbox/hurtbox.gd" id="3_yqgs1"]
[ext_resource type="Script" uid="uid://bq5jjhig8psre" path="res://scripts/resources/combat/defense_resource.gd" id="5_xw57j"]

[sub_resource type="GDScript" id="GDScript_jcc8f"]
script/source = "extends Node2D
@onready var player: Player = $Player


func _on_hurtbox_hurt(hitbox: Hitbox, hurtbox: Hurtbox) -> void:
	print(hitbox.attack_resource.damage, hurtbox)


func _on_hitbox_hit(hitbox: Hitbox, hurtbox: Hurtbox) -> void:
	print(hitbox.attack_resource.damage, hurtbox)
"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_jcc8f"]
size = Vector2(2000, 100)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_yqgs1"]
size = Vector2(100, 1000)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_7kit5"]
size = Vector2(100, 100)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_70445"]
size = Vector2(100, 300)

[sub_resource type="GDScript" id="GDScript_hvwi5"]
script/source = "extends Node2D

@onready var hitbox: Hitbox = $Hitbox


func _physics_process(delta: float) -> void:
	hitbox.position.x += 100 * delta
"

[sub_resource type="Resource" id="Resource_jddra"]
script = ExtResource("3_hvwi5")
damage = 4
metadata/_custom_type_script = "uid://brg71t7h26ou0"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_xw57j"]

[sub_resource type="Resource" id="Resource_76x20"]
script = ExtResource("5_xw57j")
metadata/_custom_type_script = "uid://bq5jjhig8psre"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_jddra"]

[sub_resource type="Resource" id="Resource_hvwi5"]
script = ExtResource("3_hvwi5")
damage = 3
metadata/_custom_type_script = "uid://brg71t7h26ou0"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_hvwi5"]
size = Vector2(50, 50)

[node name="SampleScene" type="Node2D"]
script = SubResource("GDScript_jcc8f")

[node name="Player" parent="." instance=ExtResource("1_jcc8f")]
position = Vector2(262, 796)

[node name="StaticBody2D" type="StaticBody2D" parent="."]
position = Vector2(953, 987)

[node name="CollisionShape2D" type="CollisionShape2D" parent="StaticBody2D"]
shape = SubResource("RectangleShape2D_jcc8f")

[node name="Polygon2D" type="Polygon2D" parent="StaticBody2D"]
polygon = PackedVector2Array(-1000, -50, 1000, -50, 1000, 50, -1000, 51)

[node name="StaticBody2D2" type="StaticBody2D" parent="." groups=["sticky_walls"]]
position = Vector2(125, 579)

[node name="CollisionShape2D" type="CollisionShape2D" parent="StaticBody2D2"]
shape = SubResource("RectangleShape2D_yqgs1")

[node name="Polygon2D" type="Polygon2D" parent="StaticBody2D2"]
position = Vector2(0, 6)
color = Color(0.674815, 0.674815, 0.674815, 1)
polygon = PackedVector2Array(-50, -506, 50, -506, 50, 495, -50, 495)

[node name="StaticBody2D3" type="StaticBody2D" parent="."]
position = Vector2(909, 863)

[node name="CollisionShape2D" type="CollisionShape2D" parent="StaticBody2D3"]
shape = SubResource("RectangleShape2D_7kit5")

[node name="Polygon2D" type="Polygon2D" parent="StaticBody2D3"]
color = Color(0.0338533, 0.0338533, 0.0338532, 1)
polygon = PackedVector2Array(-50, -50, 50, -50, 50, 50, -50, 50)

[node name="StaticBody2D4" type="StaticBody2D" parent="."]
position = Vector2(1523, 795)

[node name="CollisionShape2D" type="CollisionShape2D" parent="StaticBody2D4"]
shape = SubResource("RectangleShape2D_70445")

[node name="Polygon2D" type="Polygon2D" parent="StaticBody2D4"]
color = Color(0.0214346, 0.0214346, 0.0214346, 1)
polygon = PackedVector2Array(-51, -150, 50, -150, 50, 149, -50, 150)

[node name="StaticBody2D6" type="StaticBody2D" parent="."]
position = Vector2(544, 877)

[node name="CollisionShape2D" type="CollisionShape2D" parent="StaticBody2D6"]
shape = SubResource("RectangleShape2D_70445")

[node name="Polygon2D" type="Polygon2D" parent="StaticBody2D6"]
color = Color(0.0214346, 0.0214346, 0.0214346, 1)
polygon = PackedVector2Array(-51, -150, 50, -150, 50, 149, -50, 150)

[node name="StaticBody2D5" type="StaticBody2D" parent="."]
position = Vector2(1332, 641)
rotation = 1.5708

[node name="CollisionShape2D" type="CollisionShape2D" parent="StaticBody2D5"]
shape = SubResource("RectangleShape2D_70445")

[node name="Polygon2D" type="Polygon2D" parent="StaticBody2D5"]
color = Color(0.00351917, 0.00351917, 0.00351916, 1)
polygon = PackedVector2Array(-51, -150, 50, -150, 50, 149, -50, 150)

[node name="CombatTest" type="Node2D" parent="."]
script = SubResource("GDScript_hvwi5")

[node name="Hitbox" type="Area2D" parent="CombatTest"]
position = Vector2(316, 156)
script = ExtResource("2_7kit5")
attack_resource = SubResource("Resource_jddra")
metadata/_custom_type_script = "uid://c6n7fhsvfdgav"

[node name="CollisionShape2D" type="CollisionShape2D" parent="CombatTest/Hitbox"]
shape = SubResource("RectangleShape2D_xw57j")

[node name="Hurtbox" type="Area2D" parent="CombatTest"]
script = ExtResource("3_yqgs1")
defense_resource = SubResource("Resource_76x20")
metadata/_custom_type_script = "uid://e14frlxwqj6p"

[node name="CollisionShape2D" type="CollisionShape2D" parent="CombatTest/Hurtbox"]
position = Vector2(384, 155)
shape = SubResource("RectangleShape2D_jddra")

[node name="Hurtbox" type="Area2D" parent="."]
position = Vector2(721, 888)
collision_layer = 8
script = ExtResource("2_7kit5")
attack_resource = SubResource("Resource_hvwi5")
metadata/_custom_type_script = "uid://c6n7fhsvfdgav"

[node name="CollisionShape2D" type="CollisionShape2D" parent="Hurtbox"]
shape = SubResource("RectangleShape2D_hvwi5")

[node name="Polygon2D" type="Polygon2D" parent="Hurtbox"]
color = Color(0.878431, 0, 0.172549, 1)
polygon = PackedVector2Array(25, -25, -25, -25, -25, 25, 25, 25)

[connection signal="hit" from="CombatTest/Hitbox" to="." method="_on_hitbox_hit"]
[connection signal="hurt" from="CombatTest/Hurtbox" to="." method="_on_hurtbox_hurt"]
