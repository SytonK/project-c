[gd_scene load_steps=16 format=3 uid="uid://caa2tvliprdb0"]

[ext_resource type="PackedScene" uid="uid://bro60eusjxrgn" path="res://scenes/player/player.tscn" id="1_jcc8f"]
[ext_resource type="Script" uid="uid://c6n7fhsvfdgav" path="res://scripts/components/combat/hitbox and hurtbox/hitbox.gd" id="2_7kit5"]
[ext_resource type="Script" uid="uid://brg71t7h26ou0" path="res://scripts/resources/combat/attack_resource.gd" id="3_hvwi5"]
[ext_resource type="PackedScene" uid="uid://f4fepxq5itwb" path="res://scenes/enemies/dummies/attacking_dummy.tscn" id="6_xw57j"]
[ext_resource type="PackedScene" uid="uid://ddppfoesrk6ab" path="res://scenes/GUI/HUD/HUD.tscn" id="7_jddra"]
[ext_resource type="Script" uid="uid://bhexx6mj1xv3q" path="res://addons/phantom_camera/scripts/phantom_camera/phantom_camera_2d.gd" id="8_1o07t"]
[ext_resource type="Script" uid="uid://8umksf8e80fw" path="res://addons/phantom_camera/scripts/resources/tween_resource.gd" id="9_udu4s"]
[ext_resource type="Script" uid="uid://bd046eokvcnu2" path="res://addons/phantom_camera/scripts/phantom_camera_host/phantom_camera_host.gd" id="10_udu4s"]

[sub_resource type="GDScript" id="GDScript_jcc8f"]
script/source = "extends Node2D
@onready var player: Player = $Player

const TEST_WEAPON_0 = preload(\"res://scenes/player/weapons/test_weapons/test_weapon_0.tscn\")
const TEST_WEAPON_1 = preload(\"res://scenes/player/weapons/test_weapons/test_weapon_1.tscn\")
func _on_button_button_down() -> void:
	player.weapon_manager.add_weapon(TEST_WEAPON_0.instantiate())


func _on_button_2_button_down() -> void:
	player.weapon_manager.add_weapon(TEST_WEAPON_1.instantiate())


func _on_button_3_button_down() -> void:
	player.weapon_manager.go_to_next_weapon()


func _on_button_4_button_down() -> void:
	player.weapon_manager.remove_current_weapon()


func _on_button_5_button_down() -> void:
	player.weapon_manager.current_weapon.weapon_energy.value -= 7
"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_jcc8f"]
size = Vector2(2000, 100)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_yqgs1"]
size = Vector2(100, 1000)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_70445"]
size = Vector2(100, 300)

[sub_resource type="Resource" id="Resource_hvwi5"]
script = ExtResource("3_hvwi5")
damage = 3
metadata/_custom_type_script = "uid://brg71t7h26ou0"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_hvwi5"]
size = Vector2(50, 50)

[sub_resource type="Resource" id="Resource_1o07t"]
script = ExtResource("9_udu4s")
duration = 1.0
transition = 0
ease = 2

[node name="SampleScene" type="Node2D"]
script = SubResource("GDScript_jcc8f")

[node name="Player" parent="." instance=ExtResource("1_jcc8f")]
position = Vector2(262, 796)

[node name="StaticBody2D" type="StaticBody2D" parent="."]
position = Vector2(953, 987)

[node name="CollisionShape2D" type="CollisionShape2D" parent="StaticBody2D"]
shape = SubResource("RectangleShape2D_jcc8f")

[node name="Polygon2D" type="Polygon2D" parent="StaticBody2D"]
polygon = PackedVector2Array(-1000, -50, 1000, -50, 1000, 50, -1000, 51)

[node name="StaticBody2D2" type="StaticBody2D" parent="." groups=["sticky_walls"]]
position = Vector2(125, 579)

[node name="CollisionShape2D" type="CollisionShape2D" parent="StaticBody2D2"]
shape = SubResource("RectangleShape2D_yqgs1")

[node name="Polygon2D" type="Polygon2D" parent="StaticBody2D2"]
position = Vector2(0, 6)
color = Color(0.674815, 0.674815, 0.674815, 1)
polygon = PackedVector2Array(-50, -506, 50, -506, 50, 495, -50, 495)

[node name="StaticBody2D4" type="StaticBody2D" parent="."]
position = Vector2(1523, 795)

[node name="CollisionShape2D" type="CollisionShape2D" parent="StaticBody2D4"]
shape = SubResource("RectangleShape2D_70445")

[node name="Polygon2D" type="Polygon2D" parent="StaticBody2D4"]
color = Color(0.0214346, 0.0214346, 0.0214346, 1)
polygon = PackedVector2Array(-51, -150, 50, -150, 50, 149, -50, 150)

[node name="StaticBody2D6" type="StaticBody2D" parent="."]
position = Vector2(820, 802)

[node name="CollisionShape2D" type="CollisionShape2D" parent="StaticBody2D6"]
shape = SubResource("RectangleShape2D_70445")

[node name="Polygon2D" type="Polygon2D" parent="StaticBody2D6"]
color = Color(0.0214346, 0.0214346, 0.0214346, 1)
polygon = PackedVector2Array(-51, -150, 50, -150, 50, 149, -50, 150)

[node name="StaticBody2D5" type="StaticBody2D" parent="."]
position = Vector2(1332, 641)
rotation = 1.5708

[node name="CollisionShape2D" type="CollisionShape2D" parent="StaticBody2D5"]
shape = SubResource("RectangleShape2D_70445")

[node name="Polygon2D" type="Polygon2D" parent="StaticBody2D5"]
color = Color(0.00351917, 0.00351917, 0.00351916, 1)
polygon = PackedVector2Array(-51, -150, 50, -150, 50, 149, -50, 150)

[node name="Hurtbox" type="Area2D" parent="."]
position = Vector2(966, 876)
collision_layer = 8
script = ExtResource("2_7kit5")
attack_resource = SubResource("Resource_hvwi5")
metadata/_custom_type_script = "uid://c6n7fhsvfdgav"

[node name="CollisionShape2D" type="CollisionShape2D" parent="Hurtbox"]
shape = SubResource("RectangleShape2D_hvwi5")

[node name="Polygon2D" type="Polygon2D" parent="Hurtbox"]
color = Color(0.878431, 0, 0.172549, 1)
polygon = PackedVector2Array(25, -25, -25, -25, -25, 25, 25, 25)

[node name="AttackingDummy" parent="Hurtbox" instance=ExtResource("6_xw57j")]
position = Vector2(-290, 2)
scale = Vector2(-1, 1)

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="HeadsUpDisplay" parent="CanvasLayer" node_paths=PackedStringArray("player") instance=ExtResource("7_jddra")]
player = NodePath("../../Player")

[node name="Tests" type="Control" parent="CanvasLayer"]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="Button" type="Button" parent="CanvasLayer/Tests"]
layout_mode = 0
offset_left = 406.0
offset_top = 531.0
offset_right = 489.0
offset_bottom = 562.0
text = "weapon 1
"

[node name="Button2" type="Button" parent="CanvasLayer/Tests"]
layout_mode = 0
offset_left = 571.0
offset_top = 533.0
offset_right = 654.0
offset_bottom = 564.0
text = "weapon 2
"

[node name="Button3" type="Button" parent="CanvasLayer/Tests"]
layout_mode = 0
offset_left = 575.0
offset_top = 637.0
offset_right = 618.0
offset_bottom = 668.0
text = "next"

[node name="Button4" type="Button" parent="CanvasLayer/Tests"]
layout_mode = 0
offset_left = 538.0
offset_top = 752.0
offset_right = 605.0
offset_bottom = 783.0
text = "remove"

[node name="Button5" type="Button" parent="CanvasLayer/Tests"]
layout_mode = 0
offset_left = 354.0
offset_top = 674.0
offset_right = 449.0
offset_bottom = 705.0
text = "Use energy"

[node name="Camera2D" type="Camera2D" parent="."]
physics_interpolation_mode = 1
position = Vector2(262, 796)
process_callback = 0

[node name="PhantomCameraHost" type="Node" parent="Camera2D"]
process_priority = 300
process_physics_priority = 300
script = ExtResource("10_udu4s")
metadata/_custom_type_script = "uid://bd046eokvcnu2"

[node name="PhantomCamera2D" type="Node2D" parent="." node_paths=PackedStringArray("follow_target")]
top_level = true
position = Vector2(262, 796)
script = ExtResource("8_1o07t")
follow_mode = 5
follow_target = NodePath("../Player")
tween_resource = SubResource("Resource_1o07t")
tween_on_load = false
follow_damping = true
dead_zone_width = 0.24
dead_zone_height = 0.24
show_viewfinder_in_play = true
metadata/_custom_type_script = "uid://bhexx6mj1xv3q"

[connection signal="button_down" from="CanvasLayer/Tests/Button" to="." method="_on_button_button_down"]
[connection signal="button_down" from="CanvasLayer/Tests/Button2" to="." method="_on_button_2_button_down"]
[connection signal="button_down" from="CanvasLayer/Tests/Button3" to="." method="_on_button_3_button_down"]
[connection signal="button_down" from="CanvasLayer/Tests/Button4" to="." method="_on_button_4_button_down"]
[connection signal="button_down" from="CanvasLayer/Tests/Button5" to="." method="_on_button_5_button_down"]
